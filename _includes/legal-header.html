<!-- ============================================================
     BONNIEBYTE PC - LEGAL PAGE HEADER INCLUDE
     Inserts: Last Updated Date + Owner/Website/Email block
     Used in: Privacy Policy, Cookie Policy, Terms of Service, Warranty, Returns, etc.
     ============================================================ -->

<!-- Auto-updating Last Updated date -->
<p><strong>Last Updated:</strong> <span id="bb-last-updated">Loading…</span></p>

<!-- Owner / Website / Email block -->
<p>
  <strong>Owner:</strong> BonnieByte PC<br>
  <strong>Website:</strong> 
  <a href="https://www.bonniebytepc.com">https://www.bonniebytepc.com</a><br>
  <strong>Email:</strong> 
  <a href="mailto:help@bonniebytepc.com">help@bonniebytepc.com</a>
</p>

<!-- Changelog Section -->
{% if page.changelog %}
  <h3>Change History</h3>
  <ul>
    {% for entry in page.changelog %}
      <li>
        <strong>{{ entry.date }}</strong> — {{ entry.note }}
      </li>
    {% endfor %}
  </ul>
{% endif %}

<!-- GitHub Commit-Based Auto Last Updated -->
<script>
document.addEventListener("DOMContentLoaded", async () => {
  const el = document.getElementById("bb-last-updated");
  if (!el) return;

  // CHANGE THESE VALUES TO MATCH YOUR REPO
  const username = "GandalfTEGT";
  const repo     = "BBPC";

  // Detect file path from page.url (Liquid replacement)
  const filePath = "{{ page.path }}";

  try {
    const apiUrl = `https://api.github.com/repos/${username}/${repo}/commits?path=${filePath}&per_page=1`;
    const res = await fetch(apiUrl);
    const data = await res.json();

    if (data && data[0] && data[0].commit && data[0].commit.author) {
      const commitDate = new Date(data[0].commit.author.date);
      el.textContent = commitDate.toLocaleDateString("en-GB", {
        day: "numeric",
        month: "long",
        year: "numeric"
      });
    } else {
      el.textContent = "Unknown";
    }
  } catch (err) {
    el.textContent = "Unavailable";
  }
});
</script>

<!-- Optional SEO structured data for legal documents -->
{%- comment -%}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "{{ page.title }}",
  "description": "{{ page.description | default: 'Legal information for BonnieByte PC.' }}",
  "dateModified": "{{ page.date | date_to_xmlschema }}",
  "publisher": {
    "@type": "Organization",
    "name": "BonnieByte PC",
    "url": "https://www.bonniebytepc.com",
    "email": "help@bonniebytepc.com"
  }
}
</script>
{%- endcomment -%}


