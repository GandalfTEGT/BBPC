<footer class="site-footer">
<!-- test -->
  <div class="container footer-inner footer-grid">

    <!-- Column 1: Explore -->
    <div class="footer-col footer-animate">
      <button class="footer-col-header" aria-expanded="false">
        <svg class="footer-header-icon" viewBox="0 0 24 24" stroke="currentColor" fill="none" preserveAspectRatio="xMidYMid meet" width="20" height="20">
          <path d="M3 6H21" />
          <path d="M3 12H21" />
          <path d="M3 18H21" />
        </svg>
        <span class="orbitron">Explore</span>
        <span class="footer-accordion-arrow">▾</span>
      </button>
      <ul class="footer-links footer-col-content">
        <li><a href="/">Home</a></li>
        <li><a href="/products/">Products</a></li>
        <li><a href="/#why">Why BonnieByte</a></li>
        <li><a href="/#story">Our Story</a></li>
        <li><a href="/#notify">Updates</a></li>
      </ul>
    </div>

    <!-- Column 2: Tools -->
    <div class="footer-col footer-animate">
      <button class="footer-col-header" aria-expanded="false">
        <svg class="footer-header-icon" viewBox="0 0 24 24" stroke="currentColor" fill="none" preserveAspectRatio="xMidYMid meet" width="20" height="20">
          <path d="M12 2L12 6" />
          <path d="M12 18L12 22" />
          <circle cx="12" cy="12" r="4" />
        </svg>
        <span class="orbitron">Tools</span>
        <span class="footer-accordion-arrow">▾</span>
      </button>
      <ul class="footer-links footer-col-content">
        <li><a href="/tools/airflow/">Airflow Calculator</a></li>
      </ul>
    </div>

    <!-- Column 3: Legal -->
    <div class="footer-col footer-animate">
      <button class="footer-col-header" aria-expanded="false">
        <svg class="footer-header-icon" viewBox="0 0 24 24" stroke="currentColor" fill="none" preserveAspectRatio="xMidYMid meet" width="20" height="20">
          <path d="M12 3V6" />
          <path d="M8 6L5 12H11L8 6Z" />
          <path d="M16 6L13 12H19L16 6Z" />
          <path d="M12 6V21" />
        </svg>
        <span class="orbitron">Legal</span>
        <span class="footer-accordion-arrow">▾</span>
      </button>

      <ul class="footer-links footer-col-content">
        <li><a href="/legal/privacy-policy">Privacy Policy</a></li>
        <li><a href="/legal/cookie-policy">Cookie Policy</a></li>
        <li><a href="/legal/terms">Terms of Service</a></li>
        <li><a href="/legal/returns">Returns & Refunds</a></li>
        <li><a href="/legal/shipping">Shipping Policy</a></li>
        <li><a href="/warranty/">Warranty</a></li>
        <li><a href="/legal/cookie-policy#bbpc-reset-cookie-consent">Change Cookie Settings</a></li>
      </ul>
    </div>

    <!-- Column 4: Social -->
    <div class="footer-col footer-animate">
      <button class="footer-col-header" aria-expanded="false">
        <svg class="footer-header-icon" viewBox="0 0 24 24" stroke="currentColor" fill="none" preserveAspectRatio="xMidYMid meet" width="20" height="20">
          <circle cx="12" cy="12" r="9" />
        </svg>
        <span class="orbitron">Social</span>
        <span class="footer-accordion-arrow">▾</span>
      </button>

      <ul class="footer-links footer-col-content footer-social-vertical">
        <li>
          <a href="https://instagram.com/bonniebytepc" target="_blank">
            <svg class="footer-icon" viewBox="0 0 24 24" stroke="currentColor" fill="none" preserveAspectRatio="xMidYMid meet" width="20" height="20">
              <rect x="5" y="5" width="14" height="14" rx="4" />
              <circle cx="12" cy="12" r="3" />
              <circle cx="16.2" cy="7.8" r="0.9" />
            </svg>
            Instagram
          </a>
        </li>

        <li>
          <a href="https://tiktok.com/@bonniebytepc" target="_blank">
            <svg class="footer-icon" viewBox="0 0 24 24" stroke="currentColor" fill="none" preserveAspectRatio="xMidYMid meet" width="20" height="20">
              <path d="M10 4V14.5" />
              <circle cx="10" cy="17.5" r="2.5" />
              <path d="M10 6.5C12 9 15 9.5 17 9.5V4" />
            </svg>
            TikTok
          </a>
        </li>

        <li>
          <a href="https://twitter.com/bonniebytepc" target="_blank">
            <svg class="footer-icon" viewBox="0 0 24 24" stroke="currentColor" fill="none" preserveAspectRatio="xMidYMid meet" width="20" height="20">
              <defs>
                <clipPath id="bbx-hide">
                  <rect x="0" y="0" width="24" height="24"/>
                </clipPath>
                <mask id="bbx-main-stroke">
                  <rect width="24" height="24" fill="white"/>
                  <path d="M3 3 L11 3 L21 21 L13 21 Z" fill="black"/>
                </mask>
              </defs>
              <path d="M3 21 L21 3"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    mask="url(#bbx-main-stroke)" />
              <path d="M3 3 L11 3 L21 21 L13 21 Z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linejoin="round" />
            </svg>
            Twitter / X
          </a>
        </li>

        <li>
          <a href="https://facebook.com/bonniebytepc" target="_blank">
            <svg class="footer-icon" viewBox="0 0 24 24" stroke="currentColor" fill="none" preserveAspectRatio="xMidYMid meet" width="20" height="20">
              <rect x="5" y="5" width="14" height="14" rx="3" />
              <path d="M13 8H11.5C10.4 8 9.5 8.9 9.5 10V16" />
              <path d="M10 12H13" />
            </svg>
            Facebook
          </a>
        </li>
      </ul>
    </div>

  </div>

  <div class="container footer-bottom">
    <div class="footer-brand">
      <source srcset="/images/LogoDetailTag.webp" type="image/webp">
      <img src="/images/LogoDetailTag.png" alt="BonnieByte PC" class="header-logo-img">
      <p class="footer-brand-text">
        Beautiful, high-performance PC cooling crafted with Scottish pride.
      </p>
    </div>

    <p>
      <strong>Email:</strong> <a href="mailto:hello@bonniebytepc.com">hello@bonniebytepc.com</a> &nbsp;|&nbsp;
      <strong>Support:</strong> <a href="mailto:support@bonniebytepc.com">support@bonniebytepc.com</a>
    </p>

    <p>&copy; <span id="footer-year"></span> <span class="orbitron">BonnieByte PC</span>. All rights reserved.</p>
  </div>


  <script>
    document.querySelectorAll(".footer-col-header").forEach(header => {
        header.setAttribute("type", "button");
    
        header.addEventListener("click", (ev) => {
            ev.preventDefault();
            ev.stopPropagation();
    
            const expanded = header.getAttribute("aria-expanded") === "true";
            const content = header.nextElementSibling;
    
            header.setAttribute("aria-expanded", !expanded);
    
            if (!expanded) {
                content.style.maxHeight = content.scrollHeight + "px";
            } else {
                content.style.maxHeight = "0px";
            }
        });
    });
  </script>
  
  <script>
      document.addEventListener("DOMContentLoaded", () => {
        const walker = document.createTreeWalker(document.body, NodeFilter.SHOW_TEXT);
        let node;
      
        while (node = walker.nextNode()) {
          if (node.nodeValue.includes("BonnieByte PC")) {
            const span = document.createElement("span");
            span.className = "brand-name";
            span.textContent = "BonnieByte PC";
            node.parentNode.replaceChild(span, node);
          }
        }
      });
  </script>

    <!-- Hidden Google Translate widget (driven by custom language dropdown) -->
  <div id="google_translate_element" style="position:absolute; left:-9999px; top:-9999px;"></div>

  <script>
    // Called by Google when the translate script loads
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({
        pageLanguage: 'en',
        includedLanguages: 'en,gd,fr,de,es',
        autoDisplay: false
      }, 'google_translate_element');
    }

    /* ============================================================
       BONNIEBYTE PC — SAFARI STABILITY PATCH FOR GTRANSLATE
       ============================================================ */
    function doGTranslate(lang) {
        if (!lang) return;

        let attempts = 0;
        const maxAttempts = 60; // ~6 seconds
        let translationApplied = false;

        function tryApply() {
            attempts++;

            // Inline mode
            let combo = document.querySelector(".goog-te-combo");
            if (combo) {
                combo.value = lang;
                combo.dispatchEvent(new Event("change"));
                translationApplied = true;
            }

            // iFrame mode
            const iframe = document.querySelector("iframe.goog-te-menu-frame");
            if (iframe) {
                try {
                    const innerCombo = iframe.contentDocument?.querySelector(".goog-te-combo");
                    if (innerCombo) {
                        innerCombo.value = lang;
                        innerCombo.dispatchEvent(new Event("change"));
                        translationApplied = true;
                    }
                } catch(e) {
                    // Safari iframe sandbox timing
                }
            }

            if (translationApplied) {
                setTimeout(() => verifyTranslationSuccess(lang), 300);
                return;
            }

            if (attempts < maxAttempts) {
                return setTimeout(tryApply, 100);
            }

            showTranslationError();
        }

        tryApply();
    }

    /* ============================================================
       VERIFY TRANSLATION SUCCESS — detects Safari "silent fail"
       ============================================================ */
    function verifyTranslationSuccess(lang) {
        const text = document.body.innerText.slice(0, 600).toLowerCase();
        const englishMarkers = [" warranty ", " support ", " product ", " bonniebyte "];

        const seemsTranslated = !englishMarkers.some(m => text.includes(m));
        if (!seemsTranslated) {
            return setTimeout(() => {
                const t2 = document.body.innerText.slice(0, 600).toLowerCase();
                const seemsTranslated2 = !englishMarkers.some(m => t2.includes(m));

                if (!seemsTranslated2) showTranslationError();
            }, 800);
        }
    }

    /* ============================================================
       USER-FRIENDLY ERROR MESSAGE ON TOTAL FAILURE
       ============================================================ */
    function showTranslationError() {
    if (document.getElementById("translation-error-banner")) return;

    const banner = document.createElement("div");
    banner.id = "translation-error-banner";
    banner.style.position = "fixed";
    banner.style.bottom = "20px";
    banner.style.left = "50%";
    banner.style.transform = "translateX(-50%)";
    banner.style.background = "rgba(0,0,0,0.85)";
    banner.style.border = "2px solid #66aaff";
    banner.style.padding = "12px 18px";
    banner.style.borderRadius = "8px";
    banner.style.color = "#fff";
    banner.style.zIndex = "999999";
    banner.style.fontSize = "0.9rem";
    banner.style.boxShadow = "0 0 12px rgba(102,170,255,0.5)";
    banner.style.fontFamily = "Inter, sans-serif";
    banner.style.display = "flex";
    banner.style.gap = "12px";
    banner.style.alignItems = "center";

    // Message
    const msg = document.createElement("span");
    msg.textContent = "Automatic translation is temporarily unavailable.";

    // Retry button
    const retry = document.createElement("button");
    retry.textContent = "Retry";
    retry.style.background = "#66aaff";
    retry.style.color = "#000";
    retry.style.border = "none";
    retry.style.padding = "6px 12px";
    retry.style.borderRadius = "6px";
    retry.style.cursor = "pointer";
    retry.style.fontSize = "0.85rem";
    retry.style.fontWeight = "600";

    retry.onclick = () => {
        banner.remove();

        // Retry using last chosen language from your bb_lang cookie
        let lastLang = null;
        try {
            lastLang = BBCookies.get("bb_lang");
        } catch(e) {}

        if (!lastLang) {
            // Fall back to English if nothing stored
            lastLang = "en";
        }

        doGTranslate(lastLang);
    };

    banner.appendChild(msg);
    banner.appendChild(retry);
    document.body.appendChild(banner);

    // Auto-remove after 12 seconds if user ignores it
    setTimeout(() => {
        if (banner) {
            banner.style.opacity = "0";
            banner.style.transition = "opacity 0.4s ease";
            setTimeout(() => banner.remove(), 600);
        }
    }, 12000);
}
</script>

  <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
  <script>
    function hideGoogleBar() {
        const frame = document.querySelector("iframe.goog-te-banner-frame");
        if (frame) frame.style.display = "none";

        const skip = document.querySelector(".skiptranslate");
        if (skip) skip.style.display = "none";

        document.documentElement.style.top = "0px";
    }

    // Run repeatedly because Google re-inserts frames
    setInterval(hideGoogleBar, 200);
    window.addEventListener("load", hideGoogleBar);
</script>

</footer>
